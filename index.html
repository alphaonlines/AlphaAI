<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AI for Beginners | Easy Guide to Artificial Intelligence</title>
  <link rel="stylesheet" href="assets/css/styles.css">
  <script src="assets/js/common.js"></script>
</head>
<body>
  <header>
    <div class="nav">
      <div class="brand"><span class="dot"></span>AI for Beginners</div>
       <div class="nav-links">
         <a href="index.html">What is AI?</a>
         <a href="getting-started.html">Get Started</a>
         <a href="daily-life.html">AI in Daily Life</a>
         <a href="Research.md">Research</a>
       </div>
    </div>
  </header>

  <!-- Theme Transition Overlay -->
  <div class="theme-transition-overlay" id="themeOverlay"></div>

  <!-- Reading Progress Bar -->
  <div class="reading-progress" id="readingProgress"></div>

  <!-- Premium Accessibility Controls -->
  <div class="accessibility-controls">
    <button class="font-control" onclick="toggleFontSize()" aria-label="Change text size" data-tooltip="Text Size">A+</button>
    <button class="font-control" onclick="toggleContrast()" aria-label="Toggle high contrast" data-tooltip="High Contrast">‚óê</button>
    <button class="font-control theme-toggle" onclick="toggleTheme()" aria-label="Toggle theme" data-tooltip="Theme">üåô</button>
  </div>

  <main class="container">
    <section class="hero" id="top">
      <div class="pill">Beginner friendly</div>
      <div class="meta-row">
        <h1>What is Artificial Intelligence?</h1>
        <span class="badge">Easy to understand</span>
      </div>
      <p>Artificial Intelligence (AI) is like teaching computers to think and learn like humans. It's already helping you every day, even if you don't realize it.</p>
      <div class="cta-row">
        <a class="button primary" href="getting-started.html">Try AI Today</a>
        <a class="button secondary" href="daily-life.html">See AI in Daily Life</a>
        <button class="button ghost" id="openCatchUp" aria-haspopup="dialog">Catch up fast</button>
      </div>
      <p class="muted small-text">Made for beginners ‚Ä¢ No technical experience needed</p>
    </section>

    <section class="catchup-modal" id="catchUpModal" role="dialog" aria-modal="true" aria-labelledby="catchUpTitle" hidden tabindex="-1">
      <div class="modal-content">
        <div class="modal-header">
          <div>
            <p class="pill">2-minute setup</p>
            <h2 id="catchUpTitle">Find the best starting point</h2>
            <p class="muted">Answer a few quick questions. We'll jump you to the right era.</p>
          </div>
          <button class="close-modal" id="closeCatchUp" aria-label="Close questionnaire">√ó</button>
        </div>
        <form id="catchUpForm">
          <div class="grid two">
            <label class="prompt-card">
              <span>How comfortable are you with computers?</span>
              <div class="option-row">
                <input type="radio" name="comfort" value="low" required>
                <span>Not at all</span>
              </div>
              <div class="option-row">
                <input type="radio" name="comfort" value="medium">
                <span>Some experience</span>
              </div>
              <div class="option-row">
                <input type="radio" name="comfort" value="high">
                <span>Confident</span>
              </div>
            </label>
            <label class="prompt-card">
              <span>Which topics interest you?</span>
              <div class="option-row">
                <input type="checkbox" name="topics" value="ai" checked>
                <span>AI and chat tools</span>
              </div>
              <div class="option-row">
                <input type="checkbox" name="topics" value="robotics">
                <span>Robots and automation</span>
              </div>
              <div class="option-row">
                <input type="checkbox" name="topics" value="energy">
                <span>Batteries and energy</span>
              </div>
            </label>
          </div>
          <div class="grid two">
            <label class="prompt-card">
              <span>Do you know what "the cloud" means?</span>
              <div class="option-row">
                <input type="radio" name="cloud" value="yes" required>
                <span>Yes</span>
              </div>
              <div class="option-row">
                <input type="radio" name="cloud" value="kinda">
                <span>Kinda</span>
              </div>
              <div class="option-row">
                <input type="radio" name="cloud" value="no">
                <span>No</span>
              </div>
            </label>
            <label class="prompt-card">
              <span>How deep do you want to go?</span>
              <div class="option-row">
                <input type="radio" name="depth" value="quick" required>
                <span>Just the highlights</span>
              </div>
              <div class="option-row">
                <input type="radio" name="depth" value="story">
                <span>Give me the story</span>
              </div>
            </label>
          </div>
          <div class="modal-actions">
            <button type="submit" class="button primary">Show my starting era</button>
            <button type="button" class="button ghost" id="closeCatchUpFooter">Cancel</button>
          </div>
          <p class="muted small-text">We keep your answers in this browser only. You can change them anytime.</p>
        </form>
      </div>
    </section>

    <section id="timeline" aria-label="AI and tech timeline">
      <div class="timeline-header">
        <div>
          <p class="pill">Story mode</p>
          <h2>Tech Time Machine</h2>
          <p class="muted">Start from today, then scroll back through the big moments. The sticky image updates as you move.</p>
        </div>
        <div class="timeline-controls">
          <label for="startEra" class="muted">Jump to an era</label>
          <select id="startEra" aria-label="Jump to era"></select>
          <div class="filter-row" role="group" aria-label="Filter timeline by topic">
            <button class="chip active" data-filter="all">All</button>
            <button class="chip" data-filter="ai">AI</button>
            <button class="chip" data-filter="robotics">Robotics</button>
            <button class="chip" data-filter="energy">Batteries</button>
          </div>
          <div class="path-buttons" role="group" aria-label="Choose your path">
            <button class="button secondary" data-path="ai">I'm curious about AI</button>
            <button class="button secondary" data-path="robotics">Show me robots</button>
            <button class="button secondary" data-path="energy">I want battery news</button>
            <button class="button ghost" data-path="mixed">Give me everything</button>
          </div>
        </div>
      </div>

      <div class="timeline-wrap">
        <div class="timeline-sticky" aria-live="polite">
          <div class="sticky-visual" id="stickyVisual" role="img" aria-label="Present day AI and tech moment">
            <div class="visual-icon">‚ú®</div>
            <p class="muted">Highlights update as you scroll.</p>
          </div>
          <div class="era-map">
            <p class="muted small-text">You are viewing</p>
            <ul id="eraMap"></ul>
          </div>
          <div class="prompt-copy">
            <p class="muted">Starter prompts</p>
            <button class="copy-button" data-prompt="Summarize the biggest AI change in the last 5 years in simple words.">Copy: AI in 5 years</button>
            <button class="copy-button" data-prompt="List one friendly robot example and why it helps people.">Copy: Robot example</button>
          </div>
        </div>

        <div class="timeline-cards">
          <div id="timelineCards"></div>
        </div>
      </div>

      <div class="timeline-footer">
        <p class="muted">Want a shortcut? Use the "Back to Present" button or pick a path above to jump around.</p>
        <a class="button primary" href="#present-anchor" id="backToPresent">Back to Present</a>
      </div>
    </section>

    <section>
      <h2>AI in Simple Terms</h2>
      <div class="card">
        <h3>Think of AI like a helpful assistant</h3>
        <p>Just like you learn from experience, AI learns from examples. It can recognize photos, understand questions, and help with everyday tasks.</p>
      </div>
      <div class="card">
        <h3>You're already using AI</h3>
        <p>When your phone suggests words while texting, when Netflix recommends shows, or when your email filters spam‚Äîthat's AI helping you.</p>
      </div>
    </section>

    <section>
      <h2>How AI Helps You Every Day</h2>
      <div class="grid two">
        <div class="card">
          <h3>üì± On Your Phone</h3>
          <p>‚Ä¢ Voice assistants like Siri and Google Assistant<br>
             ‚Ä¢ Photo organization and face recognition<br>
             ‚Ä¢ Navigation apps that find the best routes</p>
        </div>
        <div class="card">
          <h3>üè† At Home</h3>
          <p>‚Ä¢ Smart thermostats that learn your schedule<br>
             ‚Ä¢ Security cameras that detect people<br>
             ‚Ä¢ Streaming services that suggest shows</p>
        </div>
        <div class="card">
          <h3>üíª Online</h3>
          <p>‚Ä¢ Email spam filters<br>
             ‚Ä¢ Search engines that understand questions<br>
             ‚Ä¢ Online shopping recommendations</p>
        </div>
        <div class="card">
          <h3>üöó When You Travel</h3>
          <p>‚Ä¢ GPS traffic predictions<br>
             ‚Ä¢ Flight price predictions<br>
             ‚Ä¢ Translation apps for foreign languages</p>
        </div>
      </div>
    </section>

    <section>
      <h2>Why Learn About AI?</h2>
      <div class="card">
        <h3>üéØ It Makes Life Easier</h3>
        <p>AI can help you write emails, organize photos, find recipes, and even learn new skills. It's like having a helpful friend who knows almost everything.</p>
      </div>
      <div class="card">
        <h3>üîí Stay Safe and Smart</h3>
        <p>Understanding AI helps you spot fake information, protect your privacy, and make better choices about which AI tools to use.</p>
      </div>
      <div class="card">
        <h3>üåü Keep Up with Family</h3>
        <p>Your children and grandchildren are growing up with AI. Learning the basics helps you connect with them and understand their world.</p>
      </div>
    </section>

    <section>
      <h2>Ready to Explore AI?</h2>
      <div class="grid two">
        <div class="card">
          <h3>üöÄ Try AI Today</h3>
          <p>Step-by-step guides to popular AI tools. No experience needed!</p>
          <a class="button primary" href="getting-started.html">Get Started Now</a>
        </div>
        <div class="card">
          <h3>üè† AI in Daily Life</h3>
          <p>Discover how AI is already helping you every day.</p>
          <a class="button secondary" href="daily-life.html">Explore Examples</a>
        </div>
      </div>
    </section>

    <section>
      <h2>Quick AI Facts</h2>
      <div class="card">
        <h3>ü§ñ AI is Not Science Fiction</h3>
        <p>AI is real technology that exists today. It's not robots taking over‚Äîit's tools that help people live better lives.</p>
      </div>
      <div class="card">
        <h3>üìö Anyone Can Learn AI</h3>
        <p>You don't need to be a computer expert. AI tools are designed to be easy for everyone to use.</p>
      </div>
      <div class="card">
        <h3>üõ°Ô∏è AI Can Be Safe</h3>
        <p>Just like any tool, AI is safe when used properly. We'll show you how to protect your privacy and use AI wisely.</p>
      </div>
    </section>

    <div class="back-to-top">
      <a href="#top">Back to top</a>
    </div>
  </main>

  <footer>
    Made with ‚ù§Ô∏è for beginners ‚Ä¢ No technical experience needed
  </footer>

  <script>
    // Timeline-specific functionality for index.html
    document.addEventListener('DOMContentLoaded', function() {

      // Catch up modal controls
      const catchUpModal = document.getElementById('catchUpModal');
      const openCatchUp = document.getElementById('openCatchUp');
      const closeButtons = [document.getElementById('closeCatchUp'), document.getElementById('closeCatchUpFooter')];
      const catchUpForm = document.getElementById('catchUpForm');

      function openModal() {
        catchUpModal.removeAttribute('hidden');
        catchUpModal.focus();
      }

      function closeModal() {
        catchUpModal.setAttribute('hidden', 'true');
        openCatchUp.focus();
      }

      openCatchUp.addEventListener('click', openModal);
      closeButtons.forEach(btn => btn.addEventListener('click', closeModal));
      document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape' && !catchUpModal.hasAttribute('hidden')) {
          closeModal();
        }
      });

      function scrollToEra(era) {
        const target = era === 'present' ? document.getElementById('present-anchor') : document.getElementById(`era-${era}`);
        if (target) {
          target.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }
      }

      catchUpForm.addEventListener('submit', (e) => {
        e.preventDefault();
        const data = new FormData(catchUpForm);
        const comfort = data.get('comfort');
        const depth = data.get('depth');
        const cloud = data.get('cloud');
        const topics = data.getAll('topics');

        let eraChoice = '2020';
        if (topics.includes('energy')) {
          eraChoice = '2021';
        } else if (topics.includes('robotics')) {
          eraChoice = '2023';
        } else if (depth === 'story' && comfort === 'high') {
          eraChoice = '2010';
        } else if (cloud === 'no' || comfort === 'low') {
          eraChoice = '2019';
        } else {
          eraChoice = '2022';
        }

        scrollToEra(eraChoice);
        closeModal();
      });

      // Timeline data and rendering
      const timelineData = [
        {
          era: 'present',
          yearLabel: 'Today',
          navLabel: 'Present day',
          track: 'ai',
          visual: '‚ú®',
          title: 'Modern chat AI is everywhere',
          summary: 'People now talk to AI in phones, laptops, and cars. Voice and chat help with daily tasks.',
          why: 'Why it matters: Easy tools make it simple for anyone to get answers and learn.',
          quiz: {
            answer: 'b',
            prompt: 'Mini quiz: AI is best at...',
            options: [
              { choice: 'a', label: 'Reading your mind' },
              { choice: 'b', label: 'Spotting patterns in data' },
              { choice: 'c', label: 'Cooking dinner' }
            ]
          }
        },
        {
          era: '2023',
          yearLabel: '2023',
          navLabel: '2023 ‚Äì Robotaxis approved',
          track: 'robotics',
          visual: 'üöï',
          title: 'Robotaxis get 24/7 approval',
          summary: 'California regulators let Waymo and Cruise run paid, driverless taxis across San Francisco at all hours.',
          why: 'Why it matters: Shows autonomous vehicles are reliable enough for real city service, not just tests.',
          sources: [{ label: 'The Verge', href: 'https://www.theverge.com/2023/8/10/23827790/waymo-cruise-cpuc-vote-robotaxi-san-francisco' }]
        },
        {
          era: '2022',
          yearLabel: '2022',
          navLabel: '2022 ‚Äì AI chat and art go mainstream',
          track: 'ai',
          visual: 'üé®',
          title: 'AI image generation goes mainstream',
          summary: 'OpenAI‚Äôs DALL¬∑E 2 and open models like Stable Diffusion let anyone create images from text prompts.',
          why: 'Why it matters: Creative tools moved from labs to millions of people, raising new IP and ethics questions.',
          sources: [
            { label: 'Baseten', href: 'https://www.baseten.co/blog/the-best-open-source-image-generation-model/' },
            { label: 'Medium', href: 'https://medium.com/@pdelsignore/2022-was-the-year-of-ai-art-51e0903f3c1' }
          ]
        },
        {
          era: '2022',
          yearLabel: '2022',
          track: 'ai',
          visual: 'üí¨',
          title: 'ChatGPT hits 100M users fast',
          summary: 'OpenAI launched ChatGPT in November; it reached 1M users in 5 days and 100M monthly users by January 2023.',
          why: 'Why it matters: Conversational AI became a daily tool, triggering an industry-wide rush to add chat assistants.',
          sources: [{ label: 'Reuters', href: 'https://www.reuters.com/technology/chatgpt-sets-record-fastest-growing-user-base-analyst-note-2023-02-01/' }]
        },
        {
          era: '2021',
          yearLabel: '2021',
          navLabel: '2021 ‚Äì Next-gen batteries',
          track: 'energy',
          visual: 'üîã',
          title: 'Solid-state EV battery prototype drives',
          summary: 'Toyota demoed a car running on an all-solid-state battery, promising faster charging and safer packs.',
          why: 'Why it matters: Points to longer-range, safer electric vehicles once manufacturing scales.',
          sources: [{ label: 'The Drive', href: 'https://www.thedrive.com/tech/42287/toyota-is-road-testing-a-prototype-solid-state-battery-ev' }]
        },
        {
          era: '2021',
          yearLabel: '2021',
          track: 'energy',
          visual: 'üßÇ',
          title: 'Sodium-ion batteries debut',
          summary: 'CATL unveiled its first-generation sodium-ion cells with fast charging and lower-cost materials.',
          why: 'Why it matters: Reduces reliance on lithium and rare metals, unlocking cheaper storage for EVs and the grid.',
          sources: [{ label: 'InsideEVs', href: 'https://insideevs.com/news/523413/catl-unveils-sodium-ion-battery/' }]
        },
        {
          era: '2021',
          yearLabel: '2021',
          track: 'ai',
          visual: 'üñºÔ∏è',
          title: 'NFT art sale shocks the market',
          summary: 'Beeple‚Äôs ‚ÄúEverydays‚Äù NFT sold for $69.3M at Christie‚Äôs, turning NFTs into a mainstream headline.',
          why: 'Why it matters: Proved digital ownership could command real-world prices, fueling the Web3 art boom.',
          sources: [{ label: 'Christie‚Äôs', href: 'https://press.christies.com/christies-announces-beeplesnbsphuman-onenbspthe-artists-first-ever-dynamic-physical-artworkvideo-nft' }]
        },
        {
          era: '2020',
          yearLabel: '2020',
          navLabel: '2020 ‚Äì New chips, rockets, and cheaper batteries',
          track: 'energy',
          visual: '‚ö°',
          title: 'Battery prices fall ~90% in a decade',
          summary: 'Lithium-ion packs dropped to ~$137/kWh, down from $1,100 in 2010, making EVs and storage far cheaper.',
          why: 'Why it matters: Tipped electric cars and grid storage toward mass adoption.',
          sources: [{ label: 'Renewable Energy World', href: 'https://www.renewableenergyworld.com/energy-storage/battery/annual-survey-finds-battery-prices-dropped-13-in-2020/' }]
        },
        {
          era: '2020',
          yearLabel: '2020',
          track: 'robotics',
          visual: 'üöÄ',
          title: 'SpaceX flies astronauts for NASA',
          summary: 'Crew Dragon‚Äôs Demo-2 mission carried two astronauts to orbit‚Äîthe first private spacecraft to do so.',
          why: 'Why it matters: Opened a commercial path for human spaceflight and cheaper crew missions.',
          sources: [{ label: 'NASA', href: 'https://www.nasa.gov/news-release/nasa-astronauts-launch-from-america-in-historic-test-flight-of-spacex-crew-dragon/' }]
        },
        {
          era: '2020',
          yearLabel: '2020',
          track: 'ai',
          visual: 'üß†',
          title: 'Apple‚Äôs M1 proves ARM laptops',
          summary: 'Apple‚Äôs first Mac chip delivered big speed and battery gains by moving Macs to an ARM-based system-on-chip.',
          why: 'Why it matters: Showed efficient mobile-style chips can power mainstream PCs, reshaping hardware roadmaps.',
          sources: [
            { label: 'Apple', href: 'https://www.apple.com/newsroom/2020/11/apple-unleashes-m1/' },
            { label: 'Wikipedia', href: 'https://en.wikipedia.org/wiki/Apple_M1' }
          ]
        },
        {
          era: '2019',
          yearLabel: '2019',
          navLabel: '2019 ‚Äì 5G launches',
          track: 'ai',
          visual: 'üì∂',
          title: 'First national 5G networks switch on',
          summary: 'South Korea and others launched 5G, bringing faster speeds and lower latency for billions of devices.',
          why: 'Why it matters: Laid the wireless foundation for AR, IoT, and real-time connected systems.',
          sources: [
            { label: 'Wikipedia', href: 'https://en.wikipedia.org/wiki/5G' },
            { label: 'Qualcomm', href: 'https://www.qualcomm.com/research/5g/5g-timeline/2019' }
          ]
        },
        {
          era: '2018',
          yearLabel: '2018',
          navLabel: '2018 ‚Äì First paid robotaxis',
          track: 'robotics',
          visual: 'üöó',
          title: 'First paid robotaxi rides',
          summary: 'Waymo One launched in Arizona, letting riders hail self-driving cars with an app.',
          why: 'Why it matters: Moved autonomous driving from demo to commercial service.',
          sources: [{ label: 'LA Times', href: 'https://www.latimes.com/business/autos/la-fi-hy-waymo-one-20181205-story.html' }]
        },
        {
          era: '2016',
          yearLabel: '2016',
          navLabel: '2016 ‚Äì AI and mobile tipping points',
          track: 'ai',
          visual: '‚ö´',
          title: 'AlphaGo beats a Go champion',
          summary: 'DeepMind‚Äôs AI defeated Lee Sedol 4‚Äì1, showcasing deep reinforcement learning.',
          why: 'Why it matters: Proved AI could master creative, complex decision-making.',
          sources: [{ label: 'Royal Institution', href: 'https://www.rigb.org/explore-science/explore/blog/10-ai-milestones-last-10-years' }]
        },
        {
          era: '2016',
          yearLabel: '2016',
          track: 'ai',
          visual: 'üì±',
          title: 'Mobile web tops desktop',
          summary: 'Phones and tablets passed 50% of global web traffic, cementing mobile-first design.',
          why: 'Why it matters: Forced products and services to prioritize mobile experiences.',
          sources: [{ label: 'The Guardian', href: 'https://www.theguardian.com/technology/2016/nov/02/mobile-web-browsing-desktop-smartphones-tablets' }]
        },
        {
          era: '2015',
          yearLabel: '2015',
          navLabel: '2015 ‚Äì Ethereum and home batteries',
          track: 'energy',
          visual: 'üîå',
          title: 'Tesla launches the Powerwall',
          summary: 'A wall-mounted home battery let households store solar or off-peak power for later use.',
          why: 'Why it matters: Made home energy storage mainstream and boosted residential solar.',
          sources: [{ label: 'The Guardian', href: 'https://www.theguardian.com/technology/2015/may/01/tesla-announces-low-cost-solar-batteries-elon-musk' }]
        },
        {
          era: '2015',
          yearLabel: '2015',
          track: 'ai',
          visual: '‚õìÔ∏è',
          title: 'Ethereum mainnet goes live',
          summary: 'Ethereum introduced programmable smart contracts, enabling decentralized apps and DeFi.',
          why: 'Why it matters: Expanded blockchain beyond currency to a platform for new digital markets.',
          sources: [
            { label: 'Wikipedia', href: 'https://en.wikipedia.org/wiki/Ethereum' },
            { label: 'Zerocap', href: 'https://zerocap.com/insights/snippets/ethereum-smart-contracts-changed-crypto/' }
          ]
        },
        {
          era: '2012',
          yearLabel: '2012',
          navLabel: '2012 ‚Äì Robots land and work',
          track: 'robotics',
          visual: 'üõ∞Ô∏è',
          title: 'Curiosity rover lands on Mars',
          summary: 'NASA‚Äôs rover touched down using a sky crane and found evidence Mars once had habitable conditions.',
          why: 'Why it matters: Advanced Mars science and showcased daring autonomous landing tech.',
          sources: [{ label: 'NASA', href: 'https://science.nasa.gov/mission/msl-curiosity/' }]
        },
        {
          era: '2012',
          yearLabel: '2012',
          track: 'robotics',
          visual: 'üì¶',
          title: 'Amazon buys Kiva warehouse robots',
          summary: 'Amazon acquired Kiva Systems to automate fulfillment centers with fleets of mobile robots.',
          why: 'Why it matters: Sparked the warehouse automation boom that speeds today‚Äôs deliveries.',
          sources: [{ label: 'IEEE Spectrum', href: 'https://spectrum.ieee.org/amazon-acquires-kiva-systems-for-775-million' }]
        },
        {
          era: '2011',
          yearLabel: '2011',
          navLabel: '2011 ‚Äì Voice assistants arrive',
          track: 'ai',
          visual: 'üó£Ô∏è',
          title: 'Siri brings voice to the iPhone',
          summary: 'Apple launched Siri on the iPhone 4S, making voice assistants mainstream on mobile.',
          why: 'Why it matters: Introduced millions to speaking naturally with devices, paving the way for Alexa and Google Assistant.',
          sources: [{ label: 'Britannica', href: 'https://www.britannica.com/technology/Siri' }]
        },
        {
          era: '2010',
          yearLabel: '2010',
          navLabel: '2010 ‚Äì Cloud goes global',
          track: 'ai',
          visual: '‚òÅÔ∏è',
          title: 'Azure cloud opens to the world',
          summary: 'Microsoft made Azure generally available, joining AWS in offering on-demand global cloud compute.',
          why: 'Why it matters: Helped popularize renting computing power instead of running your own servers.',
          sources: [{ label: 'Microsoft Blog', href: 'https://blogs.microsoft.com/blog/2010/02/01/windows-azure-general-availability/' }]
        }
      ];

      const timelineCardsContainer = document.getElementById('timelineCards');
      const startEraSelect = document.getElementById('startEra');
      const eraMap = document.getElementById('eraMap');
      let cards = [];

      function buildEraMeta(data) {
        const seen = new Set();
        return data.reduce((acc, item) => {
          if (!seen.has(item.era)) {
            seen.add(item.era);
            acc.push({
              era: item.era,
              label: item.navLabel || (item.era === 'present' ? 'Present day' : item.yearLabel),
              yearLabel: item.yearLabel || item.era
            });
          }
          return acc;
        }, []);
      }

      function renderEraSelect(meta) {
        startEraSelect.innerHTML = '';
        meta.forEach((entry, index) => {
          const option = document.createElement('option');
          option.value = entry.era;
          option.textContent = entry.label;
          option.selected = index === 0;
          startEraSelect.appendChild(option);
        });
      }

      function renderEraMap(meta) {
        eraMap.innerHTML = '';
        meta.forEach((entry, index) => {
          const li = document.createElement('li');
          li.textContent = entry.yearLabel || entry.label;
          if (index === 0) {
            li.classList.add('active');
          }
          eraMap.appendChild(li);
        });
      }

      function buildSources(sources) {
        const sourceLine = document.createElement('p');
        sourceLine.className = 'muted small-text';
        sourceLine.appendChild(document.createTextNode('Sources: '));
        sources.forEach((src, index) => {
          const link = document.createElement('a');
          link.href = src.href;
          link.target = '_blank';
          link.rel = 'noreferrer';
          link.textContent = src.label;
          sourceLine.appendChild(link);
          if (index < sources.length - 1) {
            sourceLine.appendChild(document.createTextNode('; '));
          }
        });
        return sourceLine;
      }

      function buildQuiz(quiz) {
        const wrapper = document.createElement('div');
        wrapper.className = 'mini-quiz';
        wrapper.dataset.answer = quiz.answer;

        const prompt = document.createElement('p');
        prompt.className = 'small-text';
        prompt.textContent = quiz.prompt;
        wrapper.appendChild(prompt);

        const options = document.createElement('div');
        options.className = 'quiz-options';
        quiz.options.forEach(opt => {
          const btn = document.createElement('button');
          btn.type = 'button';
          btn.dataset.choice = opt.choice;
          btn.textContent = opt.label;
          options.appendChild(btn);
        });
        wrapper.appendChild(options);

        const feedback = document.createElement('p');
        feedback.className = 'quiz-feedback';
        feedback.setAttribute('aria-live', 'polite');
        wrapper.appendChild(feedback);

        return wrapper;
      }

      function buildCard(item) {
        const card = document.createElement('article');
        card.className = 'timeline-card collapsed';
        card.dataset.era = item.era;
        card.dataset.track = item.track;
        card.dataset.visual = item.visual || '‚ú®';

        const dot = document.createElement('div');
        dot.className = 'timeline-dot';
        card.appendChild(dot);

        const header = document.createElement('div');
        header.className = 'timeline-card-header';

        const year = document.createElement('div');
        year.className = 'timeline-year';
        year.textContent = item.yearLabel;
        header.appendChild(year);

        const title = document.createElement('h3');
        title.textContent = item.title;
        header.appendChild(title);

        const toggle = document.createElement('button');
        toggle.type = 'button';
        toggle.className = 'card-toggle';
        toggle.setAttribute('aria-expanded', 'false');
        toggle.textContent = 'Show details';
        header.appendChild(toggle);

        card.appendChild(header);

        const body = document.createElement('div');
        body.className = 'card-body';
        const bodyId = `card-body-${item.era}-${item.yearLabel}`;
        body.id = bodyId;
        toggle.setAttribute('aria-controls', bodyId);

        const summary = document.createElement('p');
        summary.textContent = item.summary;
        body.appendChild(summary);

        if (item.why) {
          const why = document.createElement('p');
          why.className = 'why';
          why.textContent = item.why;
          body.appendChild(why);
        }

        if (item.sources && item.sources.length) {
          body.appendChild(buildSources(item.sources));
        }

        if (item.quiz) {
          body.appendChild(buildQuiz(item.quiz));
        }

        card.appendChild(body);

        return card;
      }

      function renderTimelineCards(data) {
        timelineCardsContainer.innerHTML = '';
        const anchorSet = new Set();
        data.forEach(item => {
          const card = buildCard(item);
          if (item.era === 'present') {
            card.id = 'present-anchor';
            anchorSet.add(item.era);
          } else if (!anchorSet.has(item.era)) {
            card.id = `era-${item.era}`;
            anchorSet.add(item.era);
          }
          timelineCardsContainer.appendChild(card);
        });
        cards = timelineCardsContainer.querySelectorAll('.timeline-card');
      }

      function attachCardInteractions() {
        cards.forEach(card => {
          const toggle = card.querySelector('.card-toggle');
          if (!toggle) return;

          const setExpanded = (expanded) => {
            card.classList.toggle('expanded', expanded);
            card.classList.toggle('collapsed', !expanded);
            toggle.setAttribute('aria-expanded', expanded ? 'true' : 'false');
            toggle.textContent = expanded ? 'Hide details' : 'Show details';
          };

          toggle.addEventListener('click', () => {
            const isExpanded = card.classList.contains('expanded');
            setExpanded(!isExpanded);
          });
        });
      }

      const eraMeta = buildEraMeta(timelineData);
      renderEraSelect(eraMeta);
      renderEraMap(eraMeta);
      renderTimelineCards(timelineData);
      attachCardInteractions();

      // Timeline filters and jumps
      const chips = document.querySelectorAll('.chip');
      let eraMapItems = document.querySelectorAll('#eraMap li');

      function applyFilter(filter) {
        chips.forEach(chip => chip.classList.toggle('active', chip.dataset.filter === filter || (filter === 'all' && chip.dataset.filter === 'all')));
        cards.forEach(card => {
          const matches = filter === 'all' || card.dataset.track === filter;
          card.classList.toggle('hidden', !matches);
        });
      }

      chips.forEach(chip => {
        chip.addEventListener('click', () => {
          applyFilter(chip.dataset.filter);
        });
      });

      document.querySelectorAll('.path-buttons .button').forEach(btn => {
        btn.addEventListener('click', () => {
          const path = btn.dataset.path;
          if (path === 'mixed') {
            applyFilter('all');
            scrollToEra('present');
            return;
          }
          applyFilter(path);
          const firstMatch = Array.from(cards).find(card => card.dataset.track === path && !card.classList.contains('hidden'));
          if (firstMatch) {
            firstMatch.scrollIntoView({ behavior: 'smooth', block: 'start' });
          }
        });
      });

      startEraSelect.addEventListener('change', (event) => {
        scrollToEra(event.target.value);
      });

      document.getElementById('backToPresent').addEventListener('click', (event) => {
        event.preventDefault();
        scrollToEra('present');
      });

      // Sticky visual updates
      const stickyVisual = document.getElementById('stickyVisual');
      const visualIcon = stickyVisual.querySelector('.visual-icon');
      const visualText = stickyVisual.querySelector('p');

      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            const card = entry.target;
            const icon = card.dataset.visual || '‚ú®';
            const year = card.querySelector('.timeline-year').textContent;
            const title = card.querySelector('h3').textContent;
            visualIcon.textContent = icon;
            visualText.textContent = `${year} ‚Äî ${title}`;
            eraMapItems.forEach(item => {
              const label = item.textContent.trim();
              const match = label.includes(year) || (card.dataset.era === 'present' && label.toLowerCase().includes('present'));
              item.classList.toggle('active', match);
            });
          }
        });
      }, { rootMargin: '-20% 0px -50% 0px', threshold: 0.5 });

      cards.forEach(card => observer.observe(card));

      // Mini quiz feedback
      document.querySelectorAll('.mini-quiz').forEach(quiz => {
        quiz.querySelectorAll('button').forEach(btn => {
          btn.addEventListener('click', () => {
            const correct = quiz.dataset.answer;
            const feedback = quiz.querySelector('.quiz-feedback');
            if (btn.dataset.choice === correct) {
              feedback.textContent = 'Correct! Great pick.';
            } else {
              feedback.textContent = 'Close. Try another option.';
            }
          });
        });
      });

      // Copy starter prompts
      document.querySelectorAll('.copy-button').forEach(button => {
        button.dataset.label = button.textContent;
        button.addEventListener('click', async () => {
          const text = button.dataset.prompt;
          try {
            await navigator.clipboard.writeText(text);
            button.textContent = 'Copied!';
            setTimeout(() => {
              button.textContent = button.dataset.label;
            }, 1500);
          } catch (err) {
            button.textContent = 'Copy not available here';
          }
        });
      });
    });

    // Timeline-specific initialization is handled above
    // Common functionality (reading progress, theme, etc.) is in common.js
  </script>
</body>
</html>
